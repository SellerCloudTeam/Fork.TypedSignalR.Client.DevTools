(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9663)}])},9663:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return D}});var s=t(7568),r=t(797),a=t(655),c=t(5893),l=t(7294),i=function(e){return(0,c.jsx)(c.Fragment,{children:e.text&&(0,c.jsx)("pre",{className:"has-background-dark has-text-white pre-code",children:(0,c.jsx)("code",{className:"wrap-anywhere",children:e.text})})})},o=function(e){var n=(0,l.useState)(""),t=n[0],s=n[1],r=e.options,a=e.message;return(0,l.useEffect)(function(){s(JSON.stringify(a.content,null,4))},[a,r]),(0,c.jsxs)("div",{className:"box m-2",children:[(0,c.jsx)("div",{className:"is-large",children:(0,c.jsx)("strong",{children:e.message.methodName})}),(0,c.jsx)("div",{className:"m-3",children:r.indent?(0,c.jsx)(i,{text:t}):(0,c.jsx)("div",{className:"wrap-anywhere",children:t})})]})},u=function(e){var n=(0,l.useState)(!1),t=n[0],s=n[1],r=e.messages.map(function(e,n){return(0,c.jsx)("div",{children:(0,c.jsx)(o,{message:{methodName:e.methodName,content:e.content},options:{indent:t}})},n)}).reverse();return(0,c.jsxs)("div",{className:"h-screen vertical-container",children:[(0,c.jsx)("div",{className:"box",children:(0,c.jsxs)("div",{className:"level",children:[(0,c.jsx)("div",{className:"level-left",children:(0,c.jsx)("div",{className:"is-large",children:(0,c.jsx)("strong",{children:"Receive Message Log"})})}),(0,c.jsx)("div",{className:"level-right",children:(0,c.jsx)("div",{className:"content",children:(0,c.jsxs)("label",{className:"checkbox",children:[(0,c.jsx)("input",{type:"checkbox",onChange:function(e){s(e.target.checked)}}),"indent"]})})})]})}),(0,c.jsx)("div",{className:"h-max w-max",children:(0,c.jsx)("div",{className:"has-background-light scrollarea h-max",children:r})})]})},d=t(6802),h=t(239),m=function(e){return Number(e)},f=function(e){return e},x=function(e){return new Date(e)},p=function(e){return e?JSON.parse(e):null},v={bool:function(e){return"true"===e.toLowerCase()},char:f,byte:m,sbyte:m,decimal:m,double:m,float:m,int:m,uint:m,long:m,ulong:m,short:m,ushort:m,"byte[]":f,string:f,"global::System.Uri":f,"global::System.Guid":f,"global::System.DateTime":x,"global::System.DateTimeOffset":x},g=function(e){return e in v?v[e]:p},b=function(e){var n=e.method,t=e.hubConnection,o=(0,l.useState)([]),u=o[0],d=o[1],h=(0,l.useState)(null),m=h[0],f=h[1];(0,l.useEffect)(function(){var n=Array(e.method.parameters.length);d(n)},[e.method]);var x=(0,l.useCallback)(function(){var e;(e=(0,s.Z)(function(){var e,s,c,l;return(0,a.__generator)(this,function(a){switch(a.label){case 0:console.log(u),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,null==t?void 0:(e=t).invoke.apply(e,[n.methodName].concat((0,r.Z)(u)))];case 2:return f((s=a.sent())?JSON.stringify(s,null,4):"global::System.Threading.Tasks.Task"===n.returnType?"Invocation completed.":"null"),[3,4];case 3:return l=a.sent(),f("".concat(l)),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[u,n,t,f]),p=e.method.parameters.map(function(e,n){return(0,c.jsx)(N,{name:e.name,typeName:e.typeName,index:n,setArgs:d},n)});return(0,c.jsxs)("div",{className:"box",children:[(0,c.jsx)("label",{className:"label is-large",children:n.methodName}),p,(0,c.jsx)("button",{className:"button is-info",disabled:!t,onClick:function(e){return x()},children:"Invoke"}),m&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h5",{className:"m-3",children:["response : ",n.returnType]}),(0,c.jsx)(i,{text:m})]})]})},N=function(e){var n=(0,l.useState)(null),t=n[0],s=n[1],a=e.name,i=e.typeName,o=e.index,u=e.setArgs;return(0,c.jsxs)("div",{className:"field",children:[(0,c.jsxs)("label",{className:"label",children:[a," : ",i]}),(0,c.jsx)("div",{className:"control",children:(0,c.jsx)("textarea",{className:t?"input is-danger":"input",placeholder:i,onBlur:function(e){try{var n=e.target.value,t=g(i)(n);u(function(e){return e[o]=t,(0,r.Z)(e)}),s(void 0)}catch(a){u(function(e){return e[o]=null,(0,r.Z)(e)}),s("".concat(a))}}})}),t&&(0,c.jsx)("p",{className:"help is-danger",children:"".concat(t)})]})},j=function(e){var n=e.method,t=e.hubConnection,o=e.setStreamMessage,u=(0,l.useState)([]),d=u[0],h=u[1],m=(0,l.useState)(null),f=m[0],x=m[1];(0,l.useEffect)(function(){var n=Array(e.method.parameters.length);h(n)},[e.method]);var p=(0,l.useCallback)(function(){var e;(e=(0,s.Z)(function(){var e,s;return(0,a.__generator)(this,function(a){console.log("=== ServerToClientStreamingHubMethodInvoker ==="),console.log(d),e=S(n,d),console.log(e);try{null==t||(s=t).stream.apply(s,[n.methodName].concat((0,r.Z)(e))).subscribe({next:function(e){o({methodName:"".concat(n.methodName," : OnNext"),content:e})},complete:function(){o({methodName:"".concat(n.methodName," : OnCompleted"),content:""}),x("Stream stoped.")},error:function(e){o({methodName:"".concat(n.methodName," : OnError"),content:"".concat(e)}),x("Stream stoped.")}}),x("Stream started.")}catch(c){x("".concat(c))}return[2]})}),function(){return e.apply(this,arguments)})()},[d,n,t,x,o]),v=e.method.parameters.map(function(e,n){return(0,c.jsx)(y,{name:e.name,typeName:e.typeName,index:n,setArgs:h},n)});return(0,c.jsxs)("div",{className:"box",children:[(0,c.jsx)("label",{className:"label is-large",children:n.methodName}),v,(0,c.jsx)("button",{className:"button is-info",disabled:!t,onClick:function(e){return p()},children:"Invoke"}),f&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h5",{className:"m-3",children:["response : ",n.returnType]}),(0,c.jsx)(i,{text:f})]})]})},y=function(e){var n=(0,l.useState)(null),t=n[0],s=n[1],a=e.name,i=e.typeName,o=e.index,u=e.setArgs;return(0,c.jsxs)("div",{className:"field",children:[(0,c.jsxs)("label",{className:"label",children:[a," : ",i]}),(0,c.jsx)("div",{className:"control",children:(0,c.jsx)("textarea",{className:t?"input is-danger":"input",placeholder:i,disabled:"global::System.Threading.CancellationToken"===i,onBlur:function(e){try{var n=e.target.value,t=g(i)(n);u(function(e){return e[o]=t,(0,r.Z)(e)}),s(void 0)}catch(a){u(function(e){return e[o]=null,(0,r.Z)(e)}),s("".concat(a))}}})}),t&&(0,c.jsx)("p",{className:"help is-danger",children:"".concat(t)})]})},S=function(e,n){var t=e.parameters.map(function(e){return e.typeName}).indexOf("global::System.Threading.CancellationToken");if(t<0)return n;var s=(0,r.Z)(n);return s.splice(t,1),s},C=t(5403),k=function(e){var n=e.method,t=e.hubConnection,o=(0,l.useState)([]),u=o[0],d=o[1],h=(0,l.useState)(null),m=h[0],f=h[1],x=(0,l.useState)(null),p=x[0],v=x[1];(0,l.useEffect)(function(){var n=Array(e.method.parameters.length);d(n)},[e.method]);var g=(0,l.useCallback)(function(){var e;(e=(0,s.Z)(function(){var e,s,c,l;return(0,a.__generator)(this,function(a){switch(a.label){case 0:console.log(u),f(e=new C.x),a.label=1;case 1:return a.trys.push([1,3,,4]),c=E(n,u,e),[4,null==t?void 0:(s=t).send.apply(s,[n.methodName].concat((0,r.Z)(c)))];case 2:return a.sent(),v("Stream started."),[3,4];case 3:return l=a.sent(),v("".concat(l)),f(null),null==e||e.error(l),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[u,n,t]),b=R(n),N=e.method.parameters.map(function(e,n){return(0,c.jsx)(T,{name:e.name,typeName:e.typeName,index:n,setArgs:d},n)});return(0,c.jsxs)("div",{className:"box",children:[(0,c.jsx)("label",{className:"label is-large",children:n.methodName}),N,(0,c.jsx)("button",{className:"button is-info",disabled:!t||!!m,onClick:function(e){return g()},children:"Invoke"}),(0,c.jsx)(Z,{typeName:n.parameters[b].typeName,name:n.parameters[b].name,subject:m}),(0,c.jsx)("button",{className:"button is-info ml-3",disabled:!m,onClick:function(e){null==m||m.complete(),f(null),v("Stream stopped.")},children:"Complete"}),(0,c.jsx)("button",{className:"button is-info ml-3",disabled:!m,onClick:function(e){null==m||m.error("The stream has been canceled."),f(null),v("Stream stopped.")},children:"Cancel"}),p&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h5",{className:"m-3",children:["response : ",n.returnType]}),(0,c.jsx)(i,{text:p})]})]})},T=function(e){var n=(0,l.useState)(null),t=n[0],s=n[1],a=e.name,i=e.typeName,o=e.index,u=e.setArgs;return(0,c.jsxs)("div",{className:"field",children:[(0,c.jsxs)("label",{className:"label",children:[a," : ",i]}),(0,c.jsx)("div",{className:"control",children:(0,c.jsx)("textarea",{className:t?"input is-danger":"input",placeholder:i,disabled:_(i),onBlur:function(e){try{var n=e.target.value,t=g(i)(n);u(function(e){return e[o]=t,(0,r.Z)(e)}),s(void 0)}catch(a){u(function(e){return e[o]=null,(0,r.Z)(e)}),s("".concat(a))}}})}),t&&(0,c.jsx)("p",{className:"help is-danger",children:"".concat(t)})]})},w="global::System.Collections.Generic.IAsyncEnumerable",A="global::System.Threading.Channels.ChannelReader",_=function(e){return!!(e.startsWith(w)||e.startsWith(A))},R=function(e){for(var n=0;n<e.parameters.length;n++)if(_(e.parameters[n].typeName))return n;return -1},E=function(e,n,t){var s=R(e);return s<0||(n[s]=t),n},Z=function(e){var n=(0,l.useState)(null),t=n[0],s=n[1],r=(0,l.useState)(null),a=r[0],i=r[1],o=e.name,u=e.typeName,d=e.subject;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"field",children:[(0,c.jsxs)("label",{className:"label",children:[o," : ",u]}),(0,c.jsx)("div",{className:"control",children:(0,c.jsx)("textarea",{className:a?"input is-danger":"input",placeholder:u,disabled:!d,onBlur:function(e){try{var n=e.target.value,t=g(M(u))(n);s(t),i(void 0)}catch(r){s(null),i("".concat(r))}}})}),a&&(0,c.jsx)("p",{className:"help is-danger",children:"".concat(a)})]}),(0,c.jsx)("button",{className:"button is-info",disabled:!d,onClick:function(e){return null==d?void 0:d.next(t)},children:"Next"})]})},M=function(e){if(e.startsWith(w)){var n=w.length+1,t=e.length-1;return e.substring(n,t)}if(e.startsWith(A)){var s=A.length+1,r=e.length-1;return e.substring(s,r)}return""},I=function(e){var n=e.method,t=e.hubConnection,s=e.setReceivedMessage;return W(n)?(0,c.jsx)(j,{method:n,hubConnection:t,setStreamMessage:s}):O(n)?(0,c.jsx)(k,{method:n,hubConnection:t}):(0,c.jsx)(b,{method:n,hubConnection:t})},W=function(e){return!!(e.returnType.startsWith("global::System.Collections.Generic.IAsyncEnumerable")||e.returnType.startsWith("global::System.Threading.Tasks.Task<global::System.Collections.Generic.IAsyncEnumerable")||e.returnType.startsWith("global::System.Threading.Tasks.Task<global::System.Threading.Channels.ChannelReader"))},O=function(e){var n=!0,t=!1,s=void 0;try{for(var r,a=e.parameters[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value;if(c.typeName.startsWith("global::System.Collections.Generic.IAsyncEnumerable")||c.typeName.startsWith("global::System.Threading.Channels.ChannelReader"))return!0}}catch(l){t=!0,s=l}finally{try{n||null==a.return||a.return()}finally{if(t)throw s}}return!1},F=["has-background-info-light","has-background-primary-light","has-background-danger-light"],q=function(e){var n=e.service,t=e.setReceivedMessage,r=(0,l.useState)(null),o=r[0],u=r[1],m=(0,l.useState)(null),f=m[0],x=m[1],p=(0,l.useState)(null),v=p[0],g=p[1],b=(0,l.useCallback)(function(){var e;(e=(0,s.Z)(function(){var e,s,r,c,l,i,m,f,p;return(0,a.__generator)(this,function(a){switch(a.label){case 0:if(!o)return[3,2];return[4,o.stop()];case 1:a.sent(),a.label=2;case 2:if(n.isAuthRequired&&!v)return x("Please input JWT."),[2];e=n.isAuthRequired?{accessTokenFactory:function(){return v}}:{},s=new d.s().withUrl(n.path,e).withAutomaticReconnect().configureLogging(h.i.Information).build(),r=!0,c=!1,l=void 0;try{for(i=function(){var e=f.value;s.on(e.methodName,function(){for(var n=arguments.length,s=Array(n),r=0;r<n;r++)s[r]=arguments[r];return t({methodName:e.methodName,content:s})})},m=n.receiverType.methods[Symbol.iterator]();!(r=(f=m.next()).done);r=!0)i()}catch(g){c=!0,l=g}finally{try{r||null==m.return||m.return()}finally{if(c)throw l}}a.label=3;case 3:return a.trys.push([3,5,,6]),[4,s.start()];case 4:return a.sent(),u(s),x("Connection succeeded."),[3,6];case 5:return p=a.sent(),x("Exception occurred:\n ".concat(p)),[3,6];case 6:return[2]}})}),function(){return e.apply(this,arguments)})()},[o,v,n,u,x,t]);return(0,c.jsx)("div",{className:"container is-max-widescreen ".concat(F[e.index%3]," my-6"),children:(0,c.jsxs)("div",{className:"content p-5",children:[(0,c.jsx)(J,{service:n}),(0,c.jsx)(B,{isAuthRequired:n.isAuthRequired,hubConnection:o,setJwt:g}),(0,c.jsx)("button",{className:"button is-warning my-5",onClick:function(){return b()},children:"Connect to Hub"}),(0,c.jsx)(i,{text:f}),(0,c.jsx)(G,{methods:n.hubType.methods,hubConnection:o,setReceivedMessage:t})]})})},J=function(e){var n=e.service;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h1",{className:"is-size-2",children:n.name}),(0,c.jsxs)("ul",{children:[(0,c.jsxs)("li",{children:["Hub Type: ",(0,c.jsx)("strong",{children:n.hubType.interfaceName})]}),(0,c.jsxs)("li",{children:["Receiver Type: ",(0,c.jsx)("strong",{children:n.receiverType.interfaceName})]}),(0,c.jsxs)("li",{children:["Path: ",(0,c.jsx)("strong",{children:n.path})]}),n.isAuthRequired&&(0,c.jsx)("li",{children:(0,c.jsx)("strong",{children:"Authorization Required"})})]})]})},B=function(e){var n=e.isAuthRequired,t=e.hubConnection,s=e.setJwt;return(0,c.jsx)(c.Fragment,{children:n&&(0,c.jsx)("div",{className:"field",children:(0,c.jsx)("p",{className:"control",children:(0,c.jsx)("input",{className:"input",type:"password",placeholder:"Input JWT",onBlur:function(e){s(e.target.value)},disabled:!!t})})})})},G=function(e){var n=e.methods,t=e.hubConnection,s=e.setReceivedMessage,r=n.map(function(e,n){return(0,c.jsx)(I,{method:e,hubConnection:t,setReceivedMessage:s},n)});return(0,c.jsx)(c.Fragment,{children:r})},P=function(e){var n=e.services.map(function(n,t){return(0,c.jsx)(q,{service:n,index:t,setReceivedMessage:e.setReceivedMessage},t)});return(0,c.jsx)("div",{className:"m-5",children:n})},D=function(){var e=(0,l.useState)([]),n=e[0],t=e[1],i=(0,l.useState)([]),o=i[0],d=i[1],h=(0,l.useCallback)(function(e){return t(function(n){return(0,r.Z)(n).concat([e])})},[]);return(0,l.useEffect)(function(){var e;(e=(0,s.Z)(function(){var e,n;return(0,a.__generator)(this,function(e){switch(e.label){case 0:return[4,fetch("/signalr-dev/spec.json")];case 1:return[4,e.sent().json()];case 2:return n=e.sent(),console.log(n),d(n),[2]}})}),function(){return e.apply(this,arguments)})()},[]),(0,c.jsxs)("div",{className:"columns h-screen w-screen",children:[(0,c.jsx)("div",{className:"column is-two-thirds scrollarea",children:(0,c.jsx)(P,{services:o,setReceivedMessage:h})}),(0,c.jsx)("div",{className:"column is-one-thirds",children:(0,c.jsx)("div",{children:(0,c.jsx)(u,{messages:n})})})]})}}},function(e){e.O(0,[97,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);